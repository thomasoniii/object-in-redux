(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(47)},35:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(26),c=a.n(l),i=(a(35),a(6)),o=a(7),u=a(9),s=a(8),d=a(10),y=a(4),b=a(11);function m(){return"".concat(this.name," is ").concat(this.color," of ").concat(this.magnitude)}function p(e){var t=e.layer_id,a=e.name,n=e.color,r=e.magnitude;return this.layer_id=t,this.name=a,this.color=n,this.magnitude=r,this.isObj=!0,this.explain=m,this}var h=0,O=a(19),f=function(e){return e.layers},E=function(e,t){return t-e},j=Object(O.a)([f],function(e){return Object.values(e).sort(E)}),v=Object(O.a)([f],function(e){return Object.values(e).find(function(e){return e.selected})}),L=Object(O.a)([f],function(e){return Object.values(e).reduce(function(e,t){return e[t.layer_id]=t.isObj?t:new p(t),e},{})}),g=(a(40),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).selectLayer=a.selectLayer.bind(Object(y.a)(Object(y.a)(a))),a.deleteLayer=a.deleteLayer.bind(Object(y.a)(Object(y.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"selectLayer",value:function(){this.props.selectLayer(this.props.layer.layer_id)}},{key:"deleteLayer",value:function(){var e=this.props.layer.layer_id;window.confirm("Really delete layer ".concat(e))&&this.props.deleteLayer(e)}},{key:"render",value:function(){var e=this.props.layer;return r.a.createElement("li",{className:"layer ".concat(e.selected&&"selected"," ").concat(e.isObj?"bad":"good"),onClick:this.selectLayer},r.a.createElement("span",null,"Layer : ",e.layer_id),r.a.createElement("button",{onClick:this.deleteLayer},"X"))}}]),t}(n.PureComponent)),_=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.layers,a=e.selectLayer,n=e.deleteLayer;return r.a.createElement("ul",{className:"layers"},t.map(function(e){return r.a.createElement(g,{key:e.layer_id,layer:e,selectLayer:a,deleteLayer:n})}))}}]),t}(n.PureComponent),w=Object(b.b)(function(e){return{layers:j(e)}},{selectLayer:function(e){return{payload:e,type:"SELECT_LAYER"}},deleteLayer:function(e){return{payload:e,type:"DELETE_LAYER"}}})(_),k=(a(41),{name:"some name",color:"some color",magnitude:0}),C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state=k,a.updateName=a.updateName.bind(Object(y.a)(Object(y.a)(a))),a.updateColor=a.updateColor.bind(Object(y.a)(Object(y.a)(a))),a.updateMagnitude=a.updateMagnitude.bind(Object(y.a)(Object(y.a)(a))),a.addLayer=a.addLayer.bind(Object(y.a)(Object(y.a)(a))),a.addLayerBadly=a.addLayerBadly.bind(Object(y.a)(Object(y.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"updateName",value:function(e){this.setState({name:e.target.value})}},{key:"updateColor",value:function(e){this.setState({color:e.target.value})}},{key:"updateMagnitude",value:function(e){this.setState({magnitude:e.target.value})}},{key:"addLayer",value:function(){this.props.addLayer(this.state),this.setState(k)}},{key:"addLayerBadly",value:function(){this.props.addLayerBadly(this.state),this.setState(k)}},{key:"render",value:function(){return r.a.createElement("div",{className:"add-layer"},r.a.createElement("span",null,"Name:"),r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.updateName}),r.a.createElement("span",null,"Color:"),r.a.createElement("input",{type:"text",value:this.state.color,onChange:this.updateColor}),r.a.createElement("span",null,"Magnitude:"),r.a.createElement("input",{type:"number",value:this.state.magnitude,onChange:this.updateMagnitude}),r.a.createElement("button",{className:"good-button",onClick:this.addLayer},"Add layer"),r.a.createElement("button",{className:"bad-button",onClick:this.addLayerBadly},"add layer badly"))}}]),t}(n.PureComponent),N=Object(b.b)(null,{addLayer:function(e){var t=e.name,a=e.color,n=e.magnitude;return{payload:{layer_id:++h,name:t,color:a,magnitude:n},type:"ADD_LAYER"}},addLayerBadly:function(e){var t=e.name,a=e.color,n=e.magnitude;return{payload:new p({layer_id:++h,name:t,color:a,magnitude:n}),type:"ADD_LAYER_BADLY"}}})(C),A=(a(42),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={results:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.layer,a=void 0===t?{}:t,n=(e.layerObj,a.layer_id),l=a.name,c=a.color,i=a.magnitude,o=a.isObj?"NOT":"";return r.a.createElement("div",{className:"layer-detail"},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Layer ID:"),r.a.createElement("span",null,n),r.a.createElement("span",null,"Name:"),r.a.createElement("span",null,l),r.a.createElement("span",null,"Color:"),r.a.createElement("span",null,c),r.a.createElement("span",null,"Magnitude:"),r.a.createElement("span",null,i),r.a.createElement("span",null,"Function call:"),r.a.createElement("span",null,a.explain()),r.a.createElement("span",{className:"notes"},"This object is ",o," serializable. You can ",o," select this object after the store has been serialized.")))}}]),t}(n.PureComponent)),S=Object(b.b)(function(e){var t=v(e),a=L(e);return{layer:t?a[t.layer_id]:void 0}})(A),D=(a(43),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{className:"serialize-store-button",onClick:this.props.serializeStore},"Serialize store")}}]),t}(n.PureComponent)),R=Object(b.b)(function(e){return{}},{serializeStore:function(){return{type:"SERIALIZE_STORE"}}})(D),T=(a(44),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"notes"},r.a.createElement("li",null,'Simple little POC. Fill in some data (or just leave as is) and click the "Add Layer badly" button.'),r.a.createElement("li",null,"Then you can select the layer in the list below, and details about it will appear. You can see that the last item in the details is the result of a function call."),r.a.createElement("li",null,'Click the "Serialize store" button and the whole app will break, because the functions referenced no longer exist.'),r.a.createElement("li",null,'Reload the page. Do the same steps, but this time click the "Add Layer" button. You\'ll see that all functionality is identical, including the function calls on the data. But these objects can be serialized.'),r.a.createElement("li",null,"You can also add objects in both ways, and see that some break after serialization and some do not."),r.a.createElement("li",null,"Also of note - the app will not break until you serialize the store AND select a layer which was added before serializing. The app will work as long as it isn't selected, or if you select an object before serializing.")),r.a.createElement("div",{className:"App"},r.a.createElement(R,null),r.a.createElement(N,null),r.a.createElement(w,null),r.a.createElement(S,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(12),z=a(28),B=a(18),x=a(16),I={},M=Object(Y.c)({layers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_LAYER":case"ADD_LAYER_BADLY":return Object(x.a)({},e,Object(B.a)({},t.payload.layer_id,t.payload));case"DELETE_LAYER":var a=t.payload,n=Object(x.a)({},e);return delete n[a],n;case"SELECT_LAYER":var r=t.payload;return Object.values(e).reduce(function(e,t){return t.selected&&(t=Object(x.a)({},t,{selected:!1})),t.layer_id===r&&(t=Object(x.a)({},t,{selected:!0})),e[t.layer_id]=t,e},{});case"SERIALIZE_STORE":var l=JSON.stringify(e);return JSON.parse(l);default:return e}}}),P=a(23),X=a.n(P),F=a(29),J=X.a.mark(U);function U(){return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.a)([]);case 2:case"end":return e.stop()}},J)}a.d(t,"store",function(){return W});var V=Object(z.a)(),W=Object(Y.a)(V)(Y.e)(M,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());V.run(U),c.a.render(r.a.createElement(b.a,{store:W},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.0d102f87.chunk.js.map